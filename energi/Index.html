<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulasi Usaha dan Energi</title>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
        }
        h1 {
            color: #0056b3;
            margin-bottom: 20px;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
            max-width: 1200px;
            gap: 20px;
        }
        .panel {
            background: #ffffff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        
        .controls {
            flex-basis: 300px;
            flex-grow: 1;
        }
        .controls h2 {
            margin-top: 0;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        .control-group {
            margin-bottom: 15px;
        }
        .control-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
        }
        .control-group input[type="range"], .control-group select {
            width: 100%;
            cursor: pointer;
        }
        .control-group span {
            font-family: monospace;
            font-size: 1.1em;
            color: #0056b3;
            font-weight: bold;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            margin-right: 10px;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #0056b3;
        }
        button#resetButton {
            background-color: #6c757d;
        }
        button#resetButton:hover {
            background-color: #5a6268;
        }

        .simulation-area {
            flex-basis: 700px;
            flex-grow: 2;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        canvas {
            background: #fdfdfd;
            border: 1px solid #ddd;
            width: 100%;
            border-radius: 4px;
        }

        #energy-charts {
            display: flex;
            justify-content: space-around;
            height: 180px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #fdfdfd;
        }
        .chart {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 30%;
        }
        .bar-container {
            width: 60px;
            height: 100px;
            background: #eee;
            border: 1px solid #ccc;
            position: relative;
            overflow: hidden;
            border-radius: 3px;
        }
        .bar {
            width: 100%;
            position: absolute;
            bottom: 0;
            left: 0;
            transition: height 0.1s linear;
        }
        #pe-bar { background-color: #4CAF50; }
        #ke-bar { background-color: #f44336; }
        #total-bar { background-color: #2196F3; }
        
        .chart-label {
            font-size: 0.9em;
            font-weight: 500;
            margin-top: 5px;
            text-align: center;
        }
        .chart-value {
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 4px;
            color: #333;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>

    <h1>Simulasi Usaha dan Energi (Tanpa Gesekan)</h1>
    
    <div class="container">
        <div class="panel controls">
            <h2>Panel Kontrol</h2>
            
            <div class="control-group">
                <label for="objectSelect">Pilih Objek: <span id="objectValue">Bola</span></label>
                <select id="objectSelect">
                    <option value="ball">Bola</option>
                    <option value="car">Mobil</option>
                    <option value="motorcycle">Motor</option>
                    <option value="bicycle">Sepeda</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="hSlider">Ketinggian (h): <span id="hValue">10</span> m</label>
                <input type="range" id="hSlider" min="1" max="15" value="10" step="0.5">
            </div>
            
            <div class="control-group">
                <label for="mSlider">Massa (m): <span id="mValue">5</span> kg</label>
                <input type="range" id="mSlider" min="1" max="20" value="5" step="0.5">
            </div>
            
            <button id="startButton">▶️ Mulai</button>
            <button id="resetButton">↺ Reset</button>
        </div>
        
        <div class="panel simulation-area">
            <canvas id="simCanvas" width="700" height="400"></canvas>
            
            <div id="energy-charts">
                <div class="chart">
                    <div class="bar-container">
                        <div class="bar" id="pe-bar"></div>
                    </div>
                    <div class="chart-label">Energi Potensial (PE)</div>
                    <div class="chart-value" id="pe-value">0.0 J</div>
                </div>
                <div class="chart">
                    <div class="bar-container">
                        <div class="bar" id="ke-bar"></div>
                    </div>
                    <div class="chart-label">Energi Kinetik (KE)</div>
                    <div class="chart-value" id="ke-value">0.0 J</div>
                </div>
                <div class="chart">
                    <div class="bar-container">
                        <div class="bar" id="total-bar"></div>
                    </div>
                    <div class="chart-label">Total Energi</div>
                    <div class="chart-value" id="total-value">0.0 J</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('simCanvas');
            const ctx = canvas.getContext('2d');
            
            const hSlider = document.getElementById('hSlider');
            const mSlider = document.getElementById('mSlider');
            const hValue = document.getElementById('hValue');
            const mValue = document.getElementById('mValue');
            const objectSelect = document.getElementById('objectSelect');
            const objectValue = document.getElementById('objectValue');
            const startButton = document.getElementById('startButton');
            const resetButton = document.getElementById('resetButton');
            
            const peBar = document.getElementById('pe-bar');
            const keBar = document.getElementById('ke-bar');
            const totalBar = document.getElementById('total-bar');
            const peValue = document.getElementById('pe-value');
            const keValue = document.getElementById('ke-value');
            const totalValue = document.getElementById('total-value');

            const g = 9.81;
            const PIXEL_SCALE = 20;
            const rampStartX = 50;
            const rampEndX = 350;
            const groundY = 350;
            const rampWidth = rampEndX - rampStartX;
            const IMAGE_WIDTH = 40; // Lebar gambar dalam piksel

            // URL gambar untuk setiap objek (ganti dengan URL valid yang Anda sediakan)
            const objectImages = {
                ball: null, // Bola menggunakan rendering lingkaran
                car: new Image(),
                motorcycle: new Image(),
                bicycle: new Image()
            };

            // Ganti dengan URL gambar Anda
            objectImages.car.src = 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhs1xUImSguoMA27uMB7vWXNM7QE4sRGE3JfvV9Lgp2XIVe2xV-_Wfj3ZaDp26-7SOAj40ERmiOC30BZWEhijRa8AwTwK3Nd65OhEJvgYY-7JNBiifepvnK1XG5_mOwjE9XhodWbeQ4OBFIHAaBNaqrNp1Vz9t7_K5wUJbYQ8Y1VcjSTXakZeywqKbD1s4/s1600/gambar_mobil-removebg-preview.png';
            objectImages.motorcycle.src = 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjLPiDc7D9JqlU387L4gZLMCJoTVvbOFG3sHV4KJ7Oybfbe92ZBaIT7nNxbHPWkAsFOWRvMonOvwnjgT0VBS9jUoEXNvMm9TdJtw9OK929foCoeZ5tw5EgQIfEbQX5KrgPmfDYWtI0jVVPC5RQ0t0ccYKzuLMUt9PPc1Cs_YVh5bVvxlyfF5vh17lfUGa8/s1600/download-removebg-preview.png';
            objectImages.bicycle.src = 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgdFy5ad0stbvVdXX21PRL5jGyq-hxYAM-_3I5NP_AQTmwys6-WInmJqFgfw10JbfgTSqlwI0dtOPxN0caKHnnuey2Os012_PPEyLAvwkyjpybEFOEQnbeGe6Zc5tKYuqEPv2LSyYWtHdQ3ZEUqt1RxED_oG-wB-pg6lAr-tNGFSHIS86fz_mrGcXWRI98/s1600/sepedah-removebg-preview.png';

            // Objek dan massa tetap
            const objectMasses = {
                ball: null, // Mengikuti slider
                car: 200,
                motorcycle: 80,
                bicycle: 20
            };

            let ball = {
                x: rampStartX,
                y: 0,
                radius: 10,
                mass: 5,
                v: 0,
                type: 'ball'
            };
            
            let simState = {
                h_world: 10,
                isRunning: false,
                lastTime: 0,
                rampStartY: 0,
                rampAngle: 0
            };
            
            let energy = {
                pe: 0,
                ke: 0,
                total: 0
            };
            
            let animationFrameId = null;

            function resetSimulation() {
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    animationFrameId = null;
                }
                
                simState.isRunning = false;
                simState.lastTime = 0;
                
                ball.type = objectSelect.value;
                objectValue.textContent = objectSelect.options[objectSelect.selectedIndex].text;
                
                // Set massa berdasarkan objek
                if (ball.type === 'ball') {
                    ball.mass = parseFloat(mSlider.value);
                    mSlider.disabled = false;
                } else {
                    ball.mass = objectMasses[ball.type];
                    mSlider.disabled = true;
                }
                
                simState.h_world = parseFloat(hSlider.value);
                ball.radius = ball.type === 'ball' ? Math.max(8, Math.min(20, ball.mass * 0.8)) : IMAGE_WIDTH / 2;
                
                hValue.textContent = simState.h_world.toFixed(1);
                mValue.textContent = ball.mass.toFixed(1);
                
                const h_pixel = simState.h_world * PIXEL_SCALE;
                simState.rampStartY = groundY - h_pixel;
                simState.rampAngle = Math.atan2(h_pixel, rampWidth);
                
                ball.x = rampStartX;
                ball.y = simState.rampStartY;
                ball.v = 0;
                
                energy.pe = ball.mass * g * simState.h_world;
                energy.ke = 0;
                energy.total = energy.pe;
                
                draw();
                updateEnergyDisplay();
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Gambar jalur
                ctx.beginPath();
                ctx.moveTo(rampStartX, simState.rampStartY);
                ctx.lineTo(rampEndX, groundY);
                ctx.lineTo(canvas.width - 20, groundY);
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // Gambar objek
                if (ball.type === 'ball') {
                    ctx.beginPath();
                    ctx.arc(ball.x, ball.y - ball.radius, ball.radius, 0, Math.PI * 2);
                    ctx.fillStyle = '#007bff';
                    ctx.fill();
                    ctx.strokeStyle = '#0056b3';
                    ctx.stroke();
                } else if (objectImages[ball.type].complete && objectImages[ball.type].naturalWidth !== 0) {
                    const img = objectImages[ball.type];
                    const aspectRatio = img.naturalHeight / img.naturalWidth;
                    const imgWidth = IMAGE_WIDTH;
                    const imgHeight = imgWidth * aspectRatio;
                    ctx.drawImage(img, ball.x - imgWidth / 2, ball.y - imgHeight - ball.radius, imgWidth, imgHeight);
                } else {
                    // Fallback jika gambar gagal dimuat
                    ctx.beginPath();
                    ctx.arc(ball.x, ball.y - ball.radius, ball.radius, 0, Math.PI * 2);
                    ctx.fillStyle = '#ff0000';
                    ctx.fill();
                }
            }

            function updateEnergyDisplay() {
                const maxE = energy.total || 1;
                peBar.style.height = (energy.pe / maxE) * 100 + '%';
                keBar.style.height = (energy.ke / maxE) * 100 + '%';
                totalBar.style.height = '100%';
                
                peValue.textContent = energy.pe.toFixed(1) + ' J';
                keValue.textContent = energy.ke.toFixed(1) + ' J';
                totalValue.textContent = energy.total.toFixed(1) + ' J';
            }

            function updatePhysics(dt) {
                if (dt > 0.1) dt = 0.1;
                
                const a = g * Math.sin(simState.rampAngle);
                ball.v += a * dt;
                
                const ds = ball.v * dt;
                ball.x += ds * Math.cos(simState.rampAngle);
                ball.y += ds * Math.sin(simState.rampAngle);
                
                if (ball.y >= groundY) {
                    ball.y = groundY;
                    ball.x = rampEndX + (ball.x - rampEndX);
                }
                
                const currentH = Math.max(0, (groundY - ball.y) / PIXEL_SCALE);
                energy.pe = ball.mass * g * currentH;
                energy.ke = energy.total - energy.pe;
                
                if (ball.x > canvas.width + 50) {
                    simState.isRunning = false;
                }
            }

            function simulationLoop(currentTime) {
                if (!simState.isRunning) return;
                
                if (simState.lastTime === 0) {
                    simState.lastTime = currentTime;
                }
                const dt = (currentTime - simState.lastTime) / 1000;
                updatePhysics(dt);
                draw();
                updateEnergyDisplay();
                simState.lastTime = currentTime;
                
                animationFrameId = requestAnimationFrame(simulationLoop);
            }

            function startSimulation() {
                if (simState.isRunning) return;
                simState.isRunning = true;
                simState.lastTime = 0;
                animationFrameId = requestAnimationFrame(simulationLoop);
            }

            startButton.addEventListener('click', startSimulation);
            resetButton.addEventListener('click', resetSimulation);
            hSlider.addEventListener('input', resetSimulation);
            mSlider.addEventListener('input', resetSimulation);
            objectSelect.addEventListener('change', resetSimulation);

            // Muat gambar dan reset simulasi
            Promise.all([
                new Promise(resolve => {
                    if (objectImages.car.src) objectImages.car.onload = resolve;
                    else resolve();
                }),
                new Promise(resolve => {
                    if (objectImages.motorcycle.src) objectImages.motorcycle.onload = resolve;
                    else resolve();
                }),
                new Promise(resolve => {
                    if (objectImages.bicycle.src) objectImages.bicycle.onload = resolve;
                    else resolve();
                })
            ]).then(resetSimulation);
        });
    </script>
</body>
</html>